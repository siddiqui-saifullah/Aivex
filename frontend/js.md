{
    "text": "Below is a minimal, production‑ready Express server written in ES5 (CommonJS). It includes basic middleware (helmet, morgan, body‑parser), a simple health‑check route, centralized error handling, and environment‑variable support via `dotenv`. The project structure is kept flat for simplicity, but you can easily split routes/controllers into separate folders as the app grows.",
    "server.js": "const express = require('express');\nconst helmet = require('helmet');\nconst morgan = require('morgan');\nconst bodyParser = require('body-parser');\nconst dotenv = require('dotenv');\n\n// Load .env variables (fallback to defaults if not present)\ndotenv.config();\n\nconst app = express();\nconst PORT = process.env.PORT || 3000;\n\n// ---------- Middleware ----------\napp.use(helmet());                     // Security headers\napp.use(morgan('combined'));           // Request logging\napp.use(bodyParser.json());            // Parse JSON bodies\napp.use(bodyParser.urlencoded({ extended: true })); // Parse URL‑encoded bodies\n\n// ---------- Routes ----------\napp.get('/health', function (req, res) {\n  res.status(200).json({ status: 'UP', timestamp: new Date() });\n});\n\n// Example placeholder route (replace with your own)\napp.get('/', function (req, res) {\n  res.send('Hello from ES5 Express server!');\n});\n\n// ---------- 404 Handler ----------\napp.use(function (req, res, next) {\n  var err = new Error('Not Found');\n  err.status = 404;\n  next(err);\n});\n\n// ---------- Centralized Error Handler ----------\napp.use(function (err, req, res, next) {\n  // Set locals, only providing error in development\n  var response = {\n    message: err.message,\n    // expose stack trace only in development\n    ...(process.env.NODE_ENV === 'development' && { stack: err.stack })\n  };\n  res.status(err.status || 500).json(response);\n});\n\n// ---------- Server Start ----------\napp.listen(PORT, function () {\n  console.log('Server listening on port ' + PORT);\n});\n",
    "package.json": "{\n  \"name\": \"es5-express-server\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A minimal Express server written in ES5 (CommonJS) with basic production middleware.\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\",\n    \"dev\": \"nodemon server.js\",\n    \"lint\": \"eslint .\"\n  },\n  \"keywords\": [\"express\", \"es5\", \"node\"],\n  \"author\": \"\",\n  \"license\": \"MIT\",\n  \"dependencies\": {\n    \"body-parser\": \"^1.20.2\",\n    \"dotenv\": \"^16.3.1\",\n    \"express\": \"^4.18.2\",\n    \"helmet\": \"^7.1.0\",\n    \"morgan\": \"^1.10.0\"\n  },\n  \"devDependencies\": {\n    \"eslint\": \"^8.57.0\",\n    \"nodemon\": \"^3.0.3\"\n  }\n}\n",
    ".env.example": "PORT=3000\nNODE_ENV=development\n",
    "README.md": "# ES5 Express Server\n\nA tiny, production‑ready Express server written using ES5 (CommonJS) syntax.\n\n## Features\n- **Helmet** – security‑related HTTP headers\n- **Morgan** – request logging (combined format)\n- **Body‑Parser** – JSON & URL‑encoded payload handling\n- **dotenv** – environment variable loading\n- Centralized 404 & error handling\n- Scripts for start, development (with `nodemon`), and linting\n\n## Prerequisites\n- Node.js >= 12 (LTS) – works with older versions because we stay on ES5 syntax.\n\n## Setup\n```bash\n# Clone the repo (or copy the files)\ngit clone <repo-url>\ncd es5-express-server\n\n# Install dependencies\nnpm install\n\n# Create a .env file (copy from .env.example)\ncp .env.example .env\n# Edit .env if you need custom values\n```\n\n## Development\n```bash\nnpm run dev   # runs with nodemon, auto‑restarts on changes\n```\n\n## Production\n```bash\nnpm start     # runs `node server.js`\n```\n\nThe server will listen on the port defined in `.env` (default **3000**).\n\n## API Endpoints\n- `GET /health` – health‑check returning `{ status: 'UP', timestamp: <ISO> }`\n- `GET /` – simple hello message (replace with your own routes)\n\n## Extending\nAdd new route files under a `routes/` folder and mount them in `server.js`:\n```js\nvar userRoutes = require('./routes/users');\napp.use('/api/users', userRoutes);\n```\n\n## License\nMIT\n"
}